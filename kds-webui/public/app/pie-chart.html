<!doctype html>
<html lang='en-GB'>
<head>
    <meta charset='utf-8'>
    <title>Pie-Chart Page</title>
    <script src="scripts/ractive.js"></script>
    <script src="scripts/livescript.js"></script>
    <script src="scripts/prelude-browser-min.js"></script>
    <script type="text/ls" src="pie-chart.ls"></script>
    <script src="scripts/jquery-1.12.0.min.js"></script>
    <script src="scripts/jQuery.Soap.js"></script>
</head>
<body style="margin:0px;">
    <h1>Pie-Chart</h1>
    <div id='main-output'></div>
    <script id='main-template' type='text/ractive'>
        <piechart names="A,B,C" values="{{myData}}" scores="{{x}}"/>
    </script>
    <script id='pie-chart' type='text/ractive'>
        {{#each columnList}}
            <td> {{ . }}</td>
        {{/each}}
        <svg viewBox='0 0 100 100'>
          <g transform='translate(50,50)'>
            {{# getSegments( scores ) :i}}
              <polygon on-hover='select:{{id}}' class='donut-segment' fill='{{ colors[ id["id"] ] }}'
                on-mouseover='set("selected",id)' on-mouseout='set("selected",null)'
                opacity='{{ !selected ? 1 : ( selected === id ? 1 : 0.4 ) }}'points='{{ getSegmentPoints( ., 20, 50 ) }}'>
            {{/ segments }}
          </g>
        </svg>
    </script>
    <style>
        .box {
            position: relative;
            width: 15%;
            float: left;
            margin: 0 0 1em 0;
        }
        .box:after {
            display: block;
            content: '';
            padding-bottom: 80%;
        }
    </style>
    <script>
        require("LiveScript").go()
    </script>
</body>
</html>
