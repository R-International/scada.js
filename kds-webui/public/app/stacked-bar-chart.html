<!doctype html>
<html lang='en-GB'>

    <head>
        <meta charset='utf-8'>
        <meta name="viewport" content="width=device-width; target-densitydpi=device-dpi; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
        <title>Stacked Bar Chart</title>
        <script src="scripts/ractive.js"></script>
        <script src="scripts/ractive.single-double-click.js"></script>
        <script src="scripts/livescript.js"></script>
        <script src="scripts/prelude-browser-min.js"></script>
        <script src="scripts/ractive-bootstrap.js"></script>
        <script src="scripts/jquery-1.12.0.min.js"></script>
        <script src="scripts/jQuery.Soap.js"></script>
        <link rel="stylesheet" href="scripts/bootstrap.min.css" >
        <link rel="stylesheet" href="scripts/bootstrap-theme.min.css" >
        <script src="scripts/bootstrap.min.js" ></script>

        <script type="text/ls" src="stacked-bar-chart.ls"></script>
    </head>

    <body style="margin:0px;">
        <div id='main-output'></div>
        <script id='main-template' type="text/ractive">
            <h1>Stacked Bar Chart Example</h1>

            <stacked-bar-chart data="{{myData}}"/>
            {{#each [1, 2, 3, 4, 5, 6, 7]: i}}
                <br>
                <stacked-bar-chart data="{{ simulateData(i) }}"/>
            {{/each}}
        </script>

        <script id='stacked-bar-chart' type='text/ractive'>
            <svg class="chart" width="1200" height="40" aria-labelledby="title desc" role="img">
            {{#each getGraphData(data):i}}
                <g class="bar" on-mouseover='set("selected", i)' on-mouseout='set("selected", null)'>
                    <rect width="{{amount * 5}}"  height="38" y="0" x="{{startX*5}}" style="fill: {{ getColor(i) }}" ></rect>
                    <text font-family="monospace" font-weight="bold" font-size="15" fill="white"
                        text-anchor="middle" x="{{ centerX * 5 }}" y="19"  dy=".35em" >{{amount}}</text>
                </g>
            {{/each }}
            </svg>
        </script>



        <script>
            require("LiveScript").go()
        </script>

    </body>
</html>
