<!doctype html>
<html lang='en-GB'>

<head>
    <meta charset='utf-8'>
    <title>TEST PAGE</title>
    <script src="scripts/ractive.js"></script>
    <script src="scripts/livescript.js"></script>
    <script src="scripts/prelude-browser-min.js"></script>
    <script type="text/ls" src="stacked-bar-chart.ls"></script>
    <script src="scripts/jquery-1.12.0.min.js"></script>
    <script src="scripts/jQuery.Soap.js"></script>
</head>

<body style="margin:0px;">
    <div id="myProgress" style="display:none;">
        <div id="myBar"></div>
    </div>

    <h1>test123</h1>

    <div id='example_container'></div>
        <script id='mainTemplate' type="text/ractive">
        <select value='{{ kdsProductId }}' on-change='getKdsData'>
        <option value='all' >All</option>
        {{# products:num }}
        <option value='{{ .["id"] }}'>{{num}} is {{ .["name"] }}</option>
        {{/ products }}
        </select>
        <p>Selected: {{kdsProductId}} </p>
        <stackedbarchart val="{{kdsProductId}}"/>
    </script>

    <script id='stackedchart' type='text/ractive'>
        <svg class="chart" width="420" height="150" aria-labelledby="title desc" role="img">
        {{#each getGraphData(val):i}}
        <g class="bar">
        <rect width="{{amount*10}}"  height="19" y="{{i*20}}"></rect>
        <text x="{{amount*10+5}}" y="{{i*20+8}}" dy=".35em">{{amount}} {{reason}}</text>
        </g>
        {{/each }}
        </svg>
    </script>

    <style>
    .bar {
        fill: red; /* changes the background */
        height: 21px;
        transition: fill .3s ease;
        cursor: pointer;
        font-family: Helvetica, sans-serif;
    }
    .bar text {
        color: black;
    }
    .bar:hover,
    .bar:focus {
        fill: black;
    }
    </style>

    <script>
        require("LiveScript").go()
    </script>

</body>
</html>
