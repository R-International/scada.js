extends ../templates/template.jade

block title 
    title Database Example 3
    
block ractive 
    +if('login.err')
        div(style="position: fixed; top: 10; right: 10")
            alert(type="danger" closable="true") {{ login.err.msg }}
        
    panel(title="Login {{ login.ok ? 'ok!' : 'waiting...'}}" type="{{#if login.ok}}primary{{else}}warning{{/if}}")
        login(on-login="afterLoggedIn" context="{{ login }}" db=" {{ db }}")
    +if('login.ok')
        panel(title="Add New Entry" type="{{#if login}}success{{else}}default{{/if}}")
            form-horizontal
                form-group
                    b-label.col-sm-4 Name
                    col-sm-8: input.form-control(value="{{newSales.name}}")
                form-group
                    b-label.col-sm-4 Date
                    col-sm-8: input.form-control(value="{{newSales.date}}")
                form-group
                    btn(on-buttonclick="addSalesEntry") Add sales entry!

        h2 Sales Entries:
        interactive-table(
            tabledata="{{ salesEntries }}"
            cols="a, b"
            db="{{ db }}"
            )
    ul
        +each("materials")
            li Material: {{ . }}

block script             
    script(src="database-example.js")
